{"version":3,"sources":["database.js","App.js","index.js"],"names":["database","src_database","axios","get","then","response","data","newObject","post","id","put","concat","delete","FilterForm","props","react_default","a","createElement","onChange","e","target","value","SubmitForm","onChangeName","onChangeNumber","type","onClick","preventDefault","onSubmit","Person","key","name","number","onRemove","Listing","persons","nameFilter","filter","person","toLocaleLowerCase","includes","map","App_Person","Notification","_ref","message","messageStyle","color","error","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","App","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","setNameFilter","_useState9","_useState10","errorMessage","setErrorMessage","useEffect","db","showMessage","arguments","length","undefined","setInterval","clearInterval","App_Notification","App_FilterForm","App_SubmitForm","every","catch","window","confirm","findIndex","App_Listing","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.06bf3201.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst database = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(database)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(database, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${database}/${id}/update`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${database}/${id}/delete`)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default {getAll, create, update, remove}\r\n","import React, { useState, useEffect } from 'react'\nimport db from './database'\n\nconst FilterForm = (props) => {\n  return (\n    <div>\n      rajaa näytettäviä: <input onChange={e => props.onChange(e.target.value)}/>\n    </div>\n  )\n}\n\nconst SubmitForm = (props) => {\n\n  function onSubmit(e) {\n    e.preventDefault()\n    props.onSubmit()\n  }\n\n  return (\n    <form>\n      <div>\n        nimi: <input onChange={e => props.onChangeName(e.target.value)}/>\n      </div>\n      <div>\n        numero: <input onChange={e => props.onChangeNumber(e.target.value)}/>\n      </div>\n      <div>\n        <button type=\"submit\" onClick={e => onSubmit(e)}>lisää</button>\n      </div>\n    </form>\n  )\n}\n\nconst Person = (props) => {\n  return (\n    <div key={props.id}>\n      {props.name} {props.number}\n      <button onClick={() => props.onRemove(props.id, props.name)}>Poista</button>\n    </div>\n  )\n}\n\nconst Listing = (props) => {\n  const {persons, nameFilter, onRemove} = props\n\n  return (\n    <div>\n      {persons.filter(person => person.name.toLocaleLowerCase().includes(nameFilter.toLocaleLowerCase()))\n        .map(person => (\n          <Person\n            key={person.name}\n            name={person.name}\n            number={person.number}\n            id={person.id}\n            onRemove={onRemove}\n          />\n        ))}\n    </div>\n  )\n}\n\nconst Notification = ({message}) => {\n  if (!message.message) {\n    return null\n  }\n\n  const messageStyle = {\n    color: message.error ? 'red' : 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10\n  }\n\n  return (\n    <div style={messageStyle}>\n      {message.message}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [nameFilter, setNameFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState({message: '', error: false})\n\n  useEffect(() => {\n    db.getAll().then(response => setPersons(response))\n  }, [persons])\n\n  const showMessage = (message, error=false) => {\n    setErrorMessage({message: message, error: error})\n    setInterval(() => {\n      setErrorMessage('')\n      clearInterval()\n    }, 4000)\n  }\n\n  const onSubmit = () => {\n    if (persons.every(person => person.name !== newName)) {\n      const newPerson = {name: newName, number: newNumber}\n      db.create(newPerson)\n      .then(showMessage(`Lisättiin ${newName}`))\n      .catch(error => showMessage(`Henkilön ${newName} luominen ei onnistunut`, true))\n    } else if (window.confirm(`${newName} on jo luettelossa, korvataanko vanha numero uudella?`)) {\n      db.update(persons.findIndex(person => person.name === newName) + 1, {name: newName, number: newNumber})\n      .then(showMessage(`Päivitettiin ${newName}`))\n      .catch(error => showMessage(`Henkilöä ${newName} ei löytynyt`, true))\n    }\n  }\n\n  const onRemove = (id, name) => {\n    if (window.confirm(`Poistetaanko ${name}?`)) {\n      db.remove(id)\n      .then(showMessage(`Poistettiin ${name}`))\n      .catch(error => showMessage(`Henkilö ${newName} oli jo poistettu`, true))\n    }\n  }\n\n  return (\n    <div>\n      <h1>Puhelinluettelo</h1>\n      <Notification message={errorMessage}/>\n      <FilterForm onChange={value => setNameFilter(value)}/>\n      <h2>Lisää uusi</h2>\n      <SubmitForm\n        onChangeName={value => setNewName(value)}\n        onChangeNumber={value => setNewNumber(value)}\n        onSubmit={() => onSubmit()}\n      />\n      <h2>Numerot</h2>\n      <Listing persons={persons} nameFilter={nameFilter} onRemove={onRemove}/>\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(<App/>, document.getElementById('root'))"],"sourceRoot":""}